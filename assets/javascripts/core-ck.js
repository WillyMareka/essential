/**
 * [runGraph description]
 * @param  {[type]} container        [description]
 * @param  {[type]} chart_title      [description]
 * @param  {[type]} chart_stacking   [description]
 * @param  {[type]} chart_type       [description]
 * @param  {[type]} chart_categories [description]
 * @param  {[type]} chart_series     [description]
 * @param  {[type]} chart_drilldown  [description]
 * @param  {[type]} chart_size       [description]
 * @param  {[type]} chart_margin     [description]
 * @param  {[type]} color_scheme     [description]
 * @return {[type]}                  [description]
 */function runGraph(e,t,n,r,i,s,o,u,a,f,l,c,h){file_name=e.replace("#","");file_name=file_name.replace("_"," ");$("#"+e).highcharts({colors:l,chart:{zoomType:"x",height:u,width:a,type:r,marginBottom:f},title:{text:""},xAxis:{categories:i,labels:{rotation:c}},yAxis:{min:0,title:{text:t,align:"high"},labels:{overflow:"justify",style:{"word-break":"break-all"}}},tooltip:{formatter:function(){return typeof this.series.options.stack!="undefined"?this.series.name+"<i>("+this.series.options.stack+")</i><br/>"+this.point.category+" : <b>"+this.y+"</b>":this.point.category+"<br/>"+this.series.name+" : <b>"+this.y+"</b>"},followPointer:!0},plotOptions:{series:{stacking:n},pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0,tooltip:{formatter:function(){return this.series.name+" : <b>"+this.y+"</b>"}},followPointer:!0},bar:{dataLabels:{enabled:!0,formatter:function(){return this.y!=0&&n=="percent"?Math.round(this.percentage)+"%":this.value},color:"white"},events:{legendItemClick:function(){return!1}}}},legend:{layout:"horizontal",align:"left",floating:!0,borderWidth:1,backgroundColor:"#FFFFFF",shadow:!0},credits:{enabled:!1},series:s,drilldown:{series:o}})}function loadGraph(e,t,n){$.ajax({url:e+t,beforeSend:function(e){$(n).empty();$(n).append('<div class="loader" >Loading...</div>')},success:function(e){obj=jQuery.parseJSON(e);$(n).empty();if(obj.chart_series!=null&&obj.chart_series[0]!=null){$(n).append('<div id="'+obj.container+'" ></div>');runGraph(obj.container,obj.chart_title,obj.chart_stacking,obj.chart_type,obj.chart_categories,obj.chart_series,obj.chart_drilldown,obj.chart_length,obj.chart_width,obj.chart_margin,obj.color_scheme,obj.chart_label_rotation,obj.chart_legend_floating)}else $(n).append('<div class="null_message"><i class="fa fa-exclamation-triangle"></i>No Data Found</div>')},error:function(e){$(n).empty();$(n).append('<div class="null_message"><i class="fa fa-exclamation-triangle"></i>Process Interrupted</div>')}})}function getCountryInfo(e){var t="";$.ajax({async:!1,url:"http://localhost/mnh/assets/data/countries.json",beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},success:function(n){obj=jQuery.parseJSON(n);$.each(obj,function(n,r){r["name"]==e&&(t=r.callingCode[0])})}});return t}function runNotification(e,t,n){var r="";$.ajax({url:e+t,async:!1,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},success:function(e){obj=jQuery.parseJSON(e);$.each(obj,function(e,t){phoneNumber=encodeURIComponent(getCountryInfo(t.cl_country)+t.cl_phone_number);email=encodeURIComponent(t.cl_email_address);today=new Date;hours=today.getHours();hours<12?r="Morning":hours<=18?r="Afternoon":hours>18?r="Evening":r="";newMessage=r+" "+t.cl_name+",  "+message;var n=[r,t.cl_name,message];n=JSON.stringify(n);console.log(n);notify_email(email,n)})}})}function notify_sms(e,t){$.ajax({url:"http://localhost/mnh/c_admin/notify/sms/"+e+"/"+encodeURIComponent(t),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},success:function(e){console.log(e)}})}function notify_email(e,t){$.ajax({url:"http://localhost/mnh/c_admin/notify/email/"+e+"/"+encodeURIComponent(t),beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},success:function(e){console.log(e)}})}function getCountyData(e,t,n,r){$.ajax({url:e+"c_analytics/getCountyData/"+t+"/"+n+"/"+r,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined")},success:function(i){obj=jQuery.parseJSON(i);console.log(obj);$("#county_name").text(t);$("#survey_type").text(n.toUpperCase());$("#survey_category").text(r.toUpperCase());$("#targeted .digit").text(obj[0].actual);$("#finished .digit").text(obj[0].reported);$("#started .digit").text(obj[0].unfinished);$("#not_started .digit").text(parseInt(obj[0].actual)-(parseInt(obj[0].reported)+parseInt(obj[0].unfinished)));url=e+"c_analytics/setActive/"+t+"/"+n+"/"+r;$("#load_analytics").attr("data-url",url)}})}function loadData(e,t,n,r,i){n!==""?ajax_url=e+"c_analytics/"+t+"/"+n:ajax_url=e+"c_analytics/"+t;$.ajax({url:ajax_url,async:!1,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined");$(r).empty()},success:function(e){options="";obj=jQuery.parseJSON(e);console.log(obj);$(r).select2({placeholder:i,data:obj})}})}function startIntro(){var e=introJs();e.setOptions({steps:[{element:"#network",intro:"This is a Top Bar showing the Date, User and System Information.",position:"bottom"},{element:"#navigation",intro:"The <b>Navigation</b> Menu has the links to the Surveys and Analytics as well as <b>HCMP</b> and <b>PMT</b>.",position:"top"},{element:"#surveys",intro:'The <b>Surveys</b> Section contains links to access the <span style="color:blue">Forms</span> for the 3 Surveys i.e. MNH, CH and HCW. ',position:"right"},{element:"#reporting-rates",intro:"The <b>Reporting</b> Section displays the Kenyan Map, <span style='color:red'>C</span> <span style='color:orange'>o</span> <span style='color:gold'>l</span> <span style='color:lightgreen'>o</span> <span style='color:green'>r</span> Coded to represent the Completion Rate.",position:"left"},{element:"#analytics",intro:'The <b>Analytics</b> Analytics contains links to access the <span style="color:blue">Data</span> for the 3 Surveys i.e. MNH, CH and HCW.',position:"left"}]});e.start()}$(document).ready(function(){$(".panel-collapse.collapse.in").parent().find(".panel-heading h4 a i").attr("class","fa fa-chevron-down");$(".panel-collapse").on("show.bs.collapse",function(){$(this).parent().find(".panel-heading h4 a i").attr("class","fa fa-chevron-down")});$(".panel-collapse").on("hide.bs.collapse",function(){$(this).parent().find(".panel-heading h4 a i").attr("class","fa fa-chevron-right")})});